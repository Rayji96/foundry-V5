{"name":"Basic Roll","type":"script","scope":"global","author":"0uQsagcnnkt56LRN","img":"icons/svg/dice-target.svg","command":"// This macro just prompts the user to roll a dice, and they can add additional dice if they need to.\n\n// Define the actor\nconst actor = game.actors.get(ChatMessage.getSpeaker().actor)\nconst data = actor.system\n\n// Send the roll to the API\nWOD5E.api.Roll({\n   title: \"Rolling...\",\n   basicDice: 1,\n   disableAdvancedDice: true\n})","folder":null,"ownership":{"default":0,"OrOQ70SVPCGayvrw":3,"0uQsagcnnkt56LRN":3},"flags":{"core":{}},"_stats":{"systemId":"vtm5e","systemVersion":"4.1.1","coreVersion":"11.315","createdTime":1707614396503,"modifiedTime":1712928203350,"lastModifiedBy":"0uQsagcnnkt56LRN"},"_id":"RTbzoDnCvi7Y7oAe","sort":0}
{"name":"Adjust Rage","type":"script","scope":"global","author":"OrOQ70SVPCGayvrw","img":"systems/vtm5e/assets/icons/dice/werewolf/success.png","command":"// Grab the list of selected tokens and map them\nconst tokens = canvas.tokens.controlled\nconst actorsList = tokens.map(i=>i.actor)\nlet actorsAffected = 0\nlet actorsNameList = []\n\n// First input: Will prompt a number\nlet mod = await Dialog.prompt({content: 'Adjust Rage by (+ or -) <input type=\"number\">', callback: (html) => html.find('input').val()})\n\nfor (const actor of actorsList){\n   // If the actor isn't a vampire, skip them\n   if (actor.type === 'werewolf') {\n      // Second input: The actor's current hunger\n      const oldValue = Number(actor.system.rage.value)\n      // Add the inputs together\n      let newValue = oldValue + Number(mod)\n\n      // Check to make sure the input doesn't go over or below max/min values\n      if (newValue > 5) { newValue = 5; }\n      if (newValue < 0) { newValue = 0; }\n\n      await actor.update({ \"system.rage.value\": newValue })\n\n      // Update the number of affected actors\n      actorsAffected++\n      // Add the actor to the list of displayed names in the chat message\n      actorsNameList.push(actor.name)\n   }\n}\n\nconst actorsListTextReadable = actorsNameList.join(', ')\nconst content = `${actorsAffected} characters had their Rage adjusted by ${mod}: ${actorsListTextReadable}`\n\nChatMessage.create({\n   content\n})","folder":null,"ownership":{"default":0,"OrOQ70SVPCGayvrw":3},"flags":{"core":{}},"_stats":{"systemId":"vtm5e","systemVersion":"4.0.0-prerelease2","coreVersion":"11.315","createdTime":1701128014450,"modifiedTime":1708983861006,"lastModifiedBy":"OrOQ70SVPCGayvrw"},"_id":"msVZH2N9fH5emdEo","sort":0}
{"name":"Adjust Hunger","type":"script","scope":"global","author":"OrOQ70SVPCGayvrw","img":"systems/vtm5e/assets/icons/dice/vampire/success.png","command":"// Grab the list of selected tokens and map them\nconst tokens = canvas.tokens.controlled\nconst actorsList = tokens.map(i=>i.actor)\n\n// First input: Will prompt a number\nlet mod = await Dialog.prompt({content: 'Adjust Hunger by (+ or -) <input type=\"number\">', callback: (html) => html.find('input').val()})\n\nfor (const actor of actorsList){\n   // If the actor isn't a vampire, skip them\n   if (actor.type !== 'vampire') { return; }\n\n   // Second input: The actor's current hunger\n   const oldValue = Number(actor.system.hunger.value)\n   // Add the inputs together\n   let newValue = oldValue + Number(mod)\n\n   // Check to make sure the input doesn't go over or below max/min values\n   if (newValue > 5) { newValue = 5; }\n   if (newValue < 0) { newValue = 0; }\n\n   await actor.update({ \"system.hunger.value\": newValue })\n}","folder":null,"ownership":{"default":0,"OrOQ70SVPCGayvrw":3},"flags":{"core":{}},"_stats":{"systemId":"vtm5e","systemVersion":"4.0.0-prerelease1","coreVersion":"11.315","createdTime":1701128684097,"modifiedTime":1707813729386,"lastModifiedBy":"OrOQ70SVPCGayvrw"},"_id":"s3GbZTtgvLIpl4FP","sort":300000}
{"name":"Roll API Example","type":"script","scope":"global","author":"OrOQ70SVPCGayvrw","img":"icons/svg/dice-target.svg","command":"// This macro is an example of how you can access the WOD5E Roll API.\n// More documentation for the API will be released in the future.\n\n// Define the actor\nconst actor = game.actors.get(ChatMessage.getSpeaker().actor)\nconst data = actor.system\n\n// Get the value of any bonuses\nconst strength = data.abilities.strength.value\nconst animalism = data.disciplines.animalism.value\n\n// Define hunger dice\nconst advancedDice = Math.max(data.hunger.value, 0)\n// Define vampire dice\nconst basicDice = Math.max((strength + animalism) - advancedDice, 0)\n\n// Send the roll to the API\nWOD5E.api.Roll({\n   title: \"Custom Roll\",\n   basicDice,\n   advancedDice\n})","folder":null,"ownership":{"default":0,"OrOQ70SVPCGayvrw":3},"flags":{"core":{}},"_stats":{"systemId":"vtm5e","systemVersion":"4.0.0-prerelease2","coreVersion":"11.315","createdTime":1707614396503,"modifiedTime":1708702777210,"lastModifiedBy":"OrOQ70SVPCGayvrw"},"_id":"xHe6LF89pUgEDxV3","sort":100000}
